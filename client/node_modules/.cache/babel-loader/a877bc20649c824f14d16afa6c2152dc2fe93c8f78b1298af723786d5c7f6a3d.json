{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import styles from'../AppStyles.module.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function PestDetectionUpload(){const[file,setFile]=useState(null);const[result,setResult]=useState(null);const[loading,setLoading]=useState(false);const handleUpload=async()=>{if(!file)return;const formData=new FormData();formData.append('file',file);setLoading(true);setResult(null);try{const res=await axios.post('http://localhost:5004/detect-pest',formData,{headers:{'Content-Type':'multipart/form-data'}});setResult(res.data);}catch(err){console.error(\"Error detecting pest:\",err);setResult({error:\"Error detecting pest\"});}setLoading(false);};return/*#__PURE__*/_jsxs(\"div\",{className:styles.card,children:[/*#__PURE__*/_jsx(\"h2\",{className:styles.title,children:\" Pest Detection\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:e=>setFile(e.target.files[0]),className:styles.input}),/*#__PURE__*/_jsx(\"button\",{onClick:handleUpload,className:styles.button,children:\"Detect Pest\"}),loading&&/*#__PURE__*/_jsx(\"p\",{className:styles.loading,children:\"\\uD83D\\uDD0D Analyzing image...\"}),result&&!result.error&&/*#__PURE__*/_jsxs(\"div\",{className:styles.result,children:[/*#__PURE__*/_jsx(\"h3\",{className:styles.resultHeader,children:\"\\uD83E\\uDDEA Detection Result\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Pest:\"}),\" \",result.detected_class||\"Unknown Pest\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Risk:\"}),\" \",result.risk]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Confidence:\"}),\" \",result.confidence?result.confidence.toFixed(2):\"N/A\",\"%\"]})]}),result&&result.error&&/*#__PURE__*/_jsxs(\"div\",{className:styles.alert,children:[\"Error: \",result.error]})]});}export default PestDetectionUpload;","map":{"version":3,"names":["React","useState","axios","styles","jsx","_jsx","jsxs","_jsxs","PestDetectionUpload","file","setFile","result","setResult","loading","setLoading","handleUpload","formData","FormData","append","res","post","headers","data","err","console","error","className","card","children","title","type","onChange","e","target","files","input","onClick","button","resultHeader","detected_class","risk","confidence","toFixed","alert"],"sources":["C:/Users/nishi/Desktop/Agriculture/client/src/components/PestDetectionUpload.js"],"sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport styles from '../AppStyles.module.css';\n\nfunction PestDetectionUpload() {\n  const [file, setFile] = useState(null);\n  const [result, setResult] = useState(null);\n  const [loading, setLoading] = useState(false);\n\n  const handleUpload = async () => {\n    if (!file) return;\n\n    const formData = new FormData();\n    formData.append('file', file);\n\n    setLoading(true);\n    setResult(null);\n\n    try {\n      const res = await axios.post('http://localhost:5004/detect-pest', formData, {\n        headers: { 'Content-Type': 'multipart/form-data' },\n      });\n\n      setResult(res.data);\n    } catch (err) {\n      console.error(\"Error detecting pest:\", err);\n      setResult({ error: \"Error detecting pest\" });\n    }\n\n    setLoading(false);\n  };\n\n  return (\n    <div className={styles.card}>\n      <h2 className={styles.title}> Pest Detection</h2>\n\n      <input\n        type=\"file\"\n        onChange={(e) => setFile(e.target.files[0])}\n        className={styles.input}\n      />\n      <button onClick={handleUpload} className={styles.button}>\n        Detect Pest\n      </button>\n\n      {loading && <p className={styles.loading}>üîç Analyzing image...</p>}\n\n      {result && !result.error && (\n        <div className={styles.result}>\n          <h3 className={styles.resultHeader}>üß™ Detection Result</h3>\n          <p><strong>Pest:</strong> {result.detected_class || \"Unknown Pest\"}</p>\n          <p><strong>Risk:</strong> {result.risk}</p>\n          <p><strong>Confidence:</strong> {result.confidence ? result.confidence.toFixed(2) : \"N/A\"}%</p>\n        </div>\n      )}\n\n      {result && result.error && (\n        <div className={styles.alert}>Error: {result.error}</div>\n      )}\n    </div>\n  );\n}\n\nexport default PestDetectionUpload;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,MAAM,KAAM,yBAAyB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE7C,QAAS,CAAAC,mBAAmBA,CAAA,CAAG,CAC7B,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGT,QAAQ,CAAC,IAAI,CAAC,CACtC,KAAM,CAACU,MAAM,CAAEC,SAAS,CAAC,CAAGX,QAAQ,CAAC,IAAI,CAAC,CAC1C,KAAM,CAACY,OAAO,CAAEC,UAAU,CAAC,CAAGb,QAAQ,CAAC,KAAK,CAAC,CAE7C,KAAM,CAAAc,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CAACN,IAAI,CAAE,OAEX,KAAM,CAAAO,QAAQ,CAAG,GAAI,CAAAC,QAAQ,CAAC,CAAC,CAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,CAAET,IAAI,CAAC,CAE7BK,UAAU,CAAC,IAAI,CAAC,CAChBF,SAAS,CAAC,IAAI,CAAC,CAEf,GAAI,CACF,KAAM,CAAAO,GAAG,CAAG,KAAM,CAAAjB,KAAK,CAACkB,IAAI,CAAC,mCAAmC,CAAEJ,QAAQ,CAAE,CAC1EK,OAAO,CAAE,CAAE,cAAc,CAAE,qBAAsB,CACnD,CAAC,CAAC,CAEFT,SAAS,CAACO,GAAG,CAACG,IAAI,CAAC,CACrB,CAAE,MAAOC,GAAG,CAAE,CACZC,OAAO,CAACC,KAAK,CAAC,uBAAuB,CAAEF,GAAG,CAAC,CAC3CX,SAAS,CAAC,CAAEa,KAAK,CAAE,sBAAuB,CAAC,CAAC,CAC9C,CAEAX,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAED,mBACEP,KAAA,QAAKmB,SAAS,CAAEvB,MAAM,CAACwB,IAAK,CAAAC,QAAA,eAC1BvB,IAAA,OAAIqB,SAAS,CAAEvB,MAAM,CAAC0B,KAAM,CAAAD,QAAA,CAAC,iBAAe,CAAI,CAAC,cAEjDvB,IAAA,UACEyB,IAAI,CAAC,MAAM,CACXC,QAAQ,CAAGC,CAAC,EAAKtB,OAAO,CAACsB,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAAE,CAC5CR,SAAS,CAAEvB,MAAM,CAACgC,KAAM,CACzB,CAAC,cACF9B,IAAA,WAAQ+B,OAAO,CAAErB,YAAa,CAACW,SAAS,CAAEvB,MAAM,CAACkC,MAAO,CAAAT,QAAA,CAAC,aAEzD,CAAQ,CAAC,CAERf,OAAO,eAAIR,IAAA,MAAGqB,SAAS,CAAEvB,MAAM,CAACU,OAAQ,CAAAe,QAAA,CAAC,iCAAqB,CAAG,CAAC,CAElEjB,MAAM,EAAI,CAACA,MAAM,CAACc,KAAK,eACtBlB,KAAA,QAAKmB,SAAS,CAAEvB,MAAM,CAACQ,MAAO,CAAAiB,QAAA,eAC5BvB,IAAA,OAAIqB,SAAS,CAAEvB,MAAM,CAACmC,YAAa,CAAAV,QAAA,CAAC,+BAAmB,CAAI,CAAC,cAC5DrB,KAAA,MAAAqB,QAAA,eAAGvB,IAAA,WAAAuB,QAAA,CAAQ,OAAK,CAAQ,CAAC,IAAC,CAACjB,MAAM,CAAC4B,cAAc,EAAI,cAAc,EAAI,CAAC,cACvEhC,KAAA,MAAAqB,QAAA,eAAGvB,IAAA,WAAAuB,QAAA,CAAQ,OAAK,CAAQ,CAAC,IAAC,CAACjB,MAAM,CAAC6B,IAAI,EAAI,CAAC,cAC3CjC,KAAA,MAAAqB,QAAA,eAAGvB,IAAA,WAAAuB,QAAA,CAAQ,aAAW,CAAQ,CAAC,IAAC,CAACjB,MAAM,CAAC8B,UAAU,CAAG9B,MAAM,CAAC8B,UAAU,CAACC,OAAO,CAAC,CAAC,CAAC,CAAG,KAAK,CAAC,GAAC,EAAG,CAAC,EAC5F,CACN,CAEA/B,MAAM,EAAIA,MAAM,CAACc,KAAK,eACrBlB,KAAA,QAAKmB,SAAS,CAAEvB,MAAM,CAACwC,KAAM,CAAAf,QAAA,EAAC,SAAO,CAACjB,MAAM,CAACc,KAAK,EAAM,CACzD,EACE,CAAC,CAEV,CAEA,cAAe,CAAAjB,mBAAmB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}